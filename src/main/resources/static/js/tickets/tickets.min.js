$(document).ready(function(){var d=Storages.localStorage;var a=d.get("tickets");if(a===null){d.set("tickets",[]);a=[]}c(a);$("#emptyShoppingBasket").on("click",function(){d.set("tickets",[]);c([])});$("#orderForm").on("submit",function(){const f='<input type="hidden" name="products[%s]" value="%s">';var e=0;$.each(d.get("tickets"),function(g,h){$("#products").append(vsprintf(f,[h.key,h.amount]));e++});d.set("tickets",[])});$(".add-to-shopping-basket").on("click",function(){var e=d.get("tickets");var f=b($(this).data("product-key"),e);if(f>=0){e[f].amount++}else{e.push({key:$(this).data("product-key"),title:$(this).data("product-title"),cost:$(this).data("product-cost"),amount:1})}d.set("tickets",e);c(e)});function b(f,g){for(var e=0;e<g.length;e++){if(g[e].key===f){return e}}return -1}function c(e){var h="";var g=0;var f=0;$.each(e,function(i,j){h+=vsprintf("<tr><td>%s</td><td>%s</td><td>&euro; %s</td></tr>",[j.title,j.amount,parseFloat(Math.round(j.amount*j.cost*100)/100).toFixed(2).replace(".",",")]);f+=j.amount;g+=j.amount*j.cost});if(g>0){h+="<tr><td>Transaction fee</td><td>1</td><td>&euro; 0,35</td></tr>";g+=0.35}else{if(e.length===0){h+="<tr><td colspan='3'>Shopping basket is empty!</td></tr>"}}$("#shoppingBasketTable").html(h);$("#shoppingBasketCount").html(f);$("#shoppingBasketTotal").html("&euro; "+parseFloat(Math.round(g*100)/100).toFixed(2).replace(".",","))}});