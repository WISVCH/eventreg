var TemplateSelector;function format(t,e){return $.each(e,function(e,a){t=t.replace(RegExp("\\{"+e+"\\}","g"),a)}),t}!function(t){TemplateSelector={init:function(){TemplateSelector.binds()},binds:function(){t(".product-template-item a").on("click",TemplateSelector.__setProductTemplateValues)},__setProductTemplateValues:function(e){e.preventDefault();var a=t(e.target).parent().data("template");t.each(a,function(e,a){"chOnly"===e&&(e+="1");var r=t("#"+e);r.val(a),"chOnly1"===e&&!0===a?r.attr("checked","checked"):r.removeAttr("checked")})}}}(jQuery),$(document).ready(function(){TemplateSelector.init();var t={enableTime:!0,altInput:!0,altFormat:"F j, Y H:i",dateFormat:"Y-m-dTH:i:S",time_24hr:!0,locale:{firstDayOfWeek:1}};function e(t){$("#maxSold").prop("disabled",t),$("#maxSoldPerCustomer").prop("disabled",t),$("#productAvailability").toggle(!t),$("#parentProductHint").toggle(t)}$("#sellStart").flatpickr(t),$("#sellEnd").flatpickr(t),$("#q").autocomplete({serviceUrl:"/events/api/v1/products/search/unused",onSelect:function(t){var e,a,r,o;e=t.data,a=t.value,o=(r=$("#products")).children().length,$("#productsTable").append(format("<tr><td><span class='fa fa-exclamation-triangle' data-toggle='tooltip' data-placement='right' title='Do not forget to update the event!'></span> {0}</td><td style='width: 40px;'><a class='btn btn-xs btn-danger remove-product text-white' data-product-id='{1}'><i class='fa fa-remove'></i></a></td></tr>",[a,e])),r.append(format('<input type="hidden" id="products{0}" name="products[{1}]" value="{2}">',[o,o,e])),$("#noProducts").remove(),$(function(){$('[data-toggle="tooltip"]').tooltip()}),$(this).val(""),$("#addProduct").modal("hide")}}),e(""!==$("#parentProduct").val()),$("#parentProduct").on("change",function(){let t=""!==$(this).val();e(t)}),$(".remove-product").on("click",function(t){t.preventDefault();var e=$("#products"),a=e.children().length,r=$(this).data("product-id"),o=e.find(":input[value='"+r+"']"),n=o.attr("id").replace("products","");o.remove(),$(this).parent().parent().remove();for(var l=n;l<a;l++){var c=e.find("#products"+l);c.attr("id","products"+(l-1)),c.attr("name","products["+(l-1)+"]")}})});