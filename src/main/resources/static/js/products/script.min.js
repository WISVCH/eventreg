$(document).ready(function(){var b={enableTime:true,altInput:true,altFormat:"F j, Y H:i",dateFormat:"Y-m-dTH:i:S",time_24hr:true};$("#sellStart").flatpickr(b);$("#sellEnd").flatpickr(b);$("#q").autocomplete({serviceUrl:"/events/api/v1/products/search/unused",onSelect:function(e){a(e.data,e.value);$(this).val("");$("#addProduct").modal("hide")}});$(".remove-product").on("click",function(l){l.preventDefault();var k=$("#products");var j=k.children().length;var g=$(this).data("product-id");var f=k.find(":input[value='"+g+"']");var n=f.attr("id").replace("products","");f.remove();$(this).parent().parent().remove();for(var h=n;h<j;h++){var m=k.find("#products"+h);m.attr("id","products"+(h-1));m.attr("name","products["+(h-1)+"]")}});$("#createNewProductButton").on("click",function(h){h.preventDefault();var f=c();if(f){}else{var g={title:$("#productTitle").val(),description:$("#productDescription").val(),cost:$("#productCost").val(),maxSold:$("#maxSold").val(),maxSoldPerCustomer:$("#maxSoldPerCustomer").val()};$.ajax({url:"/events/api/v1/products",type:"POST",headers:{"X-CSRF-TOKEN":$('input[name="_csrf"]').val(),"Content-Type":"application/json"},dataType:"json",cache:false,data:JSON.stringify(g),success:function(e){a(e.object.product_id,e.object.product_title);$("#addProduct").modal("hide")},error:function(e){}})}});function c(){var e=false;$("#addProductForm").find("select, textarea, input").each(function(){if(!$(this).hasClass("required")){}else{if(!$(this).val()){$(this).addClass("is-invalid");e=true}else{$(this).removeClass("is-invalid")}}});return e}function a(f,i){const e='<input type="hidden" id="products{0}" name="products[{1}]" value="{2}">';const g="<tr><td><span class='fa fa-exclamation-triangle' data-toggle='tooltip' data-placement='right' title='Do not forget to update the event!'></span> {0}</td><td style='width: 40px;'><a class='btn btn-xs btn-danger remove-product text-white' data-product-id='{1}'><i class='fa fa-remove'></i></a></td></tr>";var j=$("#products");var h=j.children().length;$("#productsTable").append(format(g,[i,f]));j.append(format(e,[h,h,f]));$("#noProducts").remove();d()}function d(){$(function(){$('[data-toggle="tooltip"]').tooltip()})}});function format(a,b){$.each(b,function(c,d){a=a.replace(new RegExp("\\{"+c+"\\}","g"),d)});return a};